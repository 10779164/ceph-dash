<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Ceph-dash : Flask based api / dashboard for viewing a ceph clusters overall health status">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Ceph-dash</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Crapworks/ceph-dash">View on GitHub</a>

          <h1 id="project_title">Ceph-dash</h1>
          <h2 id="project_tagline">Flask based api / dashboard for viewing a ceph clusters overall health status</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Crapworks/ceph-dash/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Crapworks/ceph-dash/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="ceph-dash---a-free-ceph-dashboard--monitoring-api" class="anchor" href="#ceph-dash---a-free-ceph-dashboard--monitoring-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>ceph-dash - a free ceph dashboard / monitoring api</h1>

<ul>
<li>
<a href="#user-content-ceph-dash---a-free-ceph-dashboard--monitoring-api">ceph-dash - a free ceph dashboard / monitoring api</a>

<ul>
<li><a href="#user-content-newest-feature">Newest Feature</a></li>
<li><a href="#user-content-quickstart">Quickstart</a></li>
<li><a href="#user-content-dashboard">Dashboard</a></li>
<li><a href="#user-content-rest-api">REST Api</a></li>
<li><a href="#user-content-nagios-check">Nagios Check</a></li>
<li><a href="#user-content-deployment">Deployment</a></li>
<li><a href="#user-content-pictures">Pictures!!</a></li>
<li>
<a href="#user-content-graphite-integration">Graphite Integration</a>

<ul>
<li><a href="#user-content-configuration">Configuration</a></li>
<li><a href="#user-content-example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<p>This is a small and clean approach of providing the <a href="http://ceph.com">Ceph</a> overall cluster health status via a restful json api as well as via a (hopefully) fancy web gui. There are no dependecies to the existing <code>ceph-rest-api</code>. This wsgi application talks to the cluster directly via librados.</p>

<h2>
<a id="newest-feature" class="anchor" href="#newest-feature" aria-hidden="true"><span class="octicon octicon-link"></span></a>Newest Feature</h2>

<p>The current github version (which has no release yet) features a popover, which becomes available if there are any unhealthy osds in the cluster. If the count for Unhealthy osds is not 0, hovering over the field with the number of unhealthy osds will show a popover with additional information about those osds (including the name, the state and the host that contains this osd). To do this, ceph-dash has to issue an additional command to the cluster. This additional request will only be triggered if the first command shows any unhealthy osds!</p>

<p><img src="https://github.com/crapworks/ceph-dash/raw/master/screenshots/ceph-dash-popover.png" alt="screenshot03"></p>

<p>I also did some minor code refactoring to clean everything up a bit. If I don't get any negative responses, I will create a new release in the next weeks.</p>

<h2>
<a id="quickstart" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h2>

<ol>
<li>clone this repository</li>
<li>place it on one of your ceph monitor nodes</li>
<li>run <code>ceph-dash.py</code>
</li>
<li>point your browser to http://ceph-monitor:5000/</li>
<li>enjoy!</li>
</ol>

<h2>
<a id="dashboard" class="anchor" href="#dashboard" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dashboard</h2>

<p>If you hit the address via a browser, you see the web frontend, that will inform you on a single page about all important things of your ceph cluster.</p>

<h2>
<a id="rest-api" class="anchor" href="#rest-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>REST Api</h2>

<p>If you access the address via commandline tools or programming languages, use <code>content-type: application/json</code> and you will get all the information as a json output (wich is acutally the json formatted output of <code>ceph status --format=json</code>.</p>

<p>Anyways, this is not a wrapper around the ceph binary, it uses the python bindings of librados.</p>

<p>This api can be requested by, for example, a nagios check, to check your overall cluster health. This brings the advantage of querying this information without running local checks on your monitor nodes, just by accessing a read only http api.</p>

<h2>
<a id="nagios-check" class="anchor" href="#nagios-check" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nagios Check</h2>

<p>A Nagios check that uses ceph-dash for monitoring your ceph cluster status is available <a href="https://github.com/Crapworks/check_ceph_dash">here</a></p>

<h2>
<a id="deployment" class="anchor" href="#deployment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment</h2>

<p>You may want to deploy this wsgi application into a real webserver like apache or nginx. For convenience, I've put the wsgi file and a sample apache vhost config inside of the <code>contrib</code> folder,</p>

<p>You can edit the config.json file to configure how to talk to the Ceph cluster.</p>

<ul>
<li>
<code>ceph_config</code> is the location of /etc/ceph/ceph.conf</li>
<li>
<code>keyring</code> points to a keyring to use to authenticate with the cluster</li>
<li>
<code>client_id</code> or <code>client_name</code> is used to specify the name to use with the keyring</li>
</ul>

<h2>
<a id="pictures" class="anchor" href="#pictures" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pictures!!</h2>

<p>In case anyone wants to see what to expect, here you go:</p>

<p><img src="https://github.com/crapworks/ceph-dash/raw/master/screenshots/ceph-dash.png" alt="screenshot01"></p>

<h2>
<a id="graphite-integration" class="anchor" href="#graphite-integration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Graphite Integration</h2>

<p>In the latest git version, I've integrated the flot graphing library to make it possible to show some graphs from <a href="graphite.wikidot.com">Graphite</a> in ceph-dash. First of all: ceph-dash does <strong>NOT</strong> put any data into graphite! You have to do it yourself. We are using our <a href="https://www.icinga.org/">Icinga</a> monitoring to push performance metrics to graphite. The graphs shown in the example were created by the above mentioned <a href="https://github.com/Crapworks/check_ceph_dash">Nagios check for ceph-dash</a>.</p>

<p>This is currently <strong>TESTING</strong>!</p>

<p>If you do not have a graphite section in your <code>config.json</code> the Metrics section will not appear in ceph-dash.</p>

<h3>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h3>

<p>There is a sample configuration file called <code>config.graphite.json</code>. Everything in there should be quite self-explanatory. If not, feel free to open an issue on github!</p>

<h3>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h3>

<p>Here you can see an example where one graph shows the bytes read/write per second, and another one shows the IOPS during the last two hours:</p>

<p><img src="https://github.com/crapworks/ceph-dash/raw/master/screenshots/ceph-dash-graphite.png" alt="screenshot01"></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Ceph-dash maintained by <a href="https://github.com/Crapworks">Crapworks</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
